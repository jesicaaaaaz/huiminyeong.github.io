<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课程评价</title>
    <link rel="stylesheet" href="style.css">
   <link rel="shortcut icon" href="cuc.png" type="image/png">
   <script async src="https://www.googletagmanager.com/gtag/js?id=G-68MR88MQHR"></script>
   <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-68MR88MQHR'); </script>
   <script src="js/js.js"></script>
    <style>

    </style>
</head>
<body>
  <div class="container">
    <div class="header">

      <div class="header-le">
        <a href="homepage.html" class="active">选课</a>
        <div class="dropdown">
          <button class="dropbtn">版本选择</button>
          <div class="dropdown-content">
            <a href="设计素描.html">天使版本</a>
          </div>
        </div>
      </div>
      <img class="avatar" src="OIP.jpg" alt="User Avatar">
    </div>
    <div class="review-box">
      <div class="smiley" style="padding: 0 5px 0 40px;">
        <img class="smile" src="smile1.png" alt="angle smile">
      </div>
      <!-- 评论 -->
      <div  class="boxContent">
            <!-- 导航栏部分 -->
          <ul class="table table1 clearfix">
            <li class="tabActive">
              <p>全部</p>
              <p>1</p>
            </li>
            <li class="">
              <p>事多</p>
              <p>1</p>
            </li>
            <li>
              <p>签到多</p>
              <p>0</p>
            </li>
            <li>
              <p>给分低</p>
              <p>0</p>
            </li>
          </ul>
        <div>
          <div class="box box1 conAvtive"  id="reviewBox">
            <p>期末作业任务量有点大</p>
          </div>
          <div class="box box1 "  id="">
            <p>期末作业任务量有点大</p>
          </div>
          <div class="box box1"  id="">
            <p></p>
          </div>
          <div class="box box1"  id="">
            <p>给分有点低，小小失望</p>
            <p>给分巨低，就凭一份作业打分这也太？？</p>
            <p>分低+1</p>
          </div>
        </div>
        <!-- 评论输入框 -->
        <div class="comment-input-container">
          <div class="inputBox inputBox1">
            <textarea id="commentInput" class="commentInput1 commentInput2" placeholder="输入您的评论"></textarea>
            <button type="button" id="btnInput" style="background:#b74330 ;">发布</button>
          </div>
        </div>
      </div>

    </div>

    <!-- 背景图 -->
     <img src="left.png" alt="" class="bgImg">

     <script>
      // 清空localStorage内容
     localStorage.clear();
      $(".table li").on("click", function() {
        var divs = $(".box")
        var lis = $(".table li")
        lis.removeClass('tabActive')
        $(this).addClass('tabActive')
        for (var i = 0; i < lis.length; i ++) {
          if (lis[i] == this) {
            divs.removeClass('conAvtive')
            divs.eq(i).addClass('conAvtive')
          }
        }
      })
      function submitComment() {
        var comment = document.getElementById('commentInput').value;
        if (comment.trim() !== "") {
          // var newComment = document.querySelectorAll('.box p');
          var newComment = document.createElement('p');
          newComment.textContent = comment;
          document.getElementById('reviewBox').appendChild(newComment);
          saveComment(comment);
          document.getElementById('commentInput').value = "";
        }
      }
      function saveComment(comment) {
        var comments = JSON.parse(localStorage.getItem('coursepage_comments')) || [];
        comments.push(comment);
        localStorage.setItem('coursepage_comments', JSON.stringify(comments));
      }
      function loadComments() {
        var comments = JSON.parse(localStorage.getItem('coursepage_comments')) || [];
        var reviewBox = document.getElementById('reviewBox');
        comments.forEach(function(comment) {
          // var newComment = document.querySelectorAll('.box p');
          var newComment = document.createElement('p');
          newComment.textContent = comment;
          reviewBox.appendChild(newComment);
        });
      }

      document.getElementById('commentInput').addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
          event.preventDefault();
          submitComment();
        }
      });
      document.getElementById('btnInput').addEventListener('click', function(event) {
          event.preventDefault();
          submitComment();
      });
      window.onload = loadComments;



    </script>
  </div>
</body>
</html>
